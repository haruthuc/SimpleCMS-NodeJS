<% layout('admin-layout') -%>
<script>
    var API_URL = "/admin/api/menu";
    function getList($args,cb){
        $.get(API_URL,$args).done(function( data ) {
                if(data.success === false){
                    alert(data.error);
                    cb(data.error);
                }else{
                    cb(null,data);
                }
            }).fail(function() {
                cb("GET LIST ERROR");
          });
    }

    function templateHTML($data){
        var template = '<div class="row ad-list-item" data-id="'+$data['id']+'">';
        template += '<div class="infont col-md-1 text-right">'
        template += '<span class="margin-top-5px"><i class="fa fa-lg fa-arrows-v"></i></span>';
        template += '</div>';
        template += '<div class="col-md-5">';
        template += '<input type="text" name="title" placeholder="Title" class="form-control" value="'+$data['title']+'"></input></div>';
        template += '<div class="col-md-3"> <input type="text" name="link" placeholder="Link" class="form-control" value="'+$data['link']+'"></input>';
        template += '</div><div class="infont col-md-3 text-left">';
        template += '<a href="#"> <span class="margin-top-5px"><i class="fa fa-lg fa-trash-o"></i></span></a></div></div>';
        return template;
    }

    function renderList(elementID){
        //call get list menu
        getList({},function(error,returnData){
            if(!error){
                var data = returnData.data;
                console.log("renderList data",data);
                if(data.length > 0){
                    for(var i=0;i<data.length;i++){
                        var template = templateHTML(data[i]);
                        $(elementID).append(template);
                    }
                }
            }
        });
        //render html
    }

    $(document).ready(function(){
        renderList("#menu-list");
    });
</script>

<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>Menu</h2>
    </div>
    <div class="text-right col-lg-2">
        <button class="btn btn-lg btn-primary margin-top-20px" type="submit">Save Changes</button>
    </div>
</div>
<div class="row">
    <div class="col-lg-12">
        <div class="ibox float-e-margins">
            <div id="menu-list" class="ibox-content">

            </div>
        </div>
    </div>
</div>